{% extends "sitio_publico/base.html" %}
{% load static %}

{% block content %}

<!-- HERO UNIFICADO -->
<section class="fomento-hero text-center">
  <h1 class="fw-bold mb-2">Postulación a la convocatoria</h1>
  <p class="text-white">{{ convocatoria.titulo }}</p>
</section>

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8 text-center">

      <div class="dav-steps">
        <div class="step active">1. Datos del proyecto</div>
        <div class="step">2. Documentación personal</div>
        <div class="step">3. Documentación del proyecto</div>
      </div>

    </div>
  </div>
</div>

<div class="container py-3">
  <div class="row justify-content-center">

    <!-- INFO -->
    <div class="col-lg-4 mb-4">
      <div class="dav-card">
        <div class="dav-card-body">
          <h5 class="fw-bold mb-3">Completá la información del proyecto</h5>
          <p class="mb-0">
            Esta información es necesaria para validar tu postulación.<br><br>
            <strong>Muy importante:</strong> antes de continuar, asegurate de
            actualizar tus datos en el Registro Audiovisual desde
            <em>“Mi cuenta”</em>. La información del Registro acompañará tu convocatoria y tendrá validez legal.<br><br>
            Al finalizar este formulario, hacé clic en <strong>“Siguiente”</strong>.
          </p>
        </div>
      </div>
    </div>

    <!-- FORMULARIO -->
    <div class="col-lg-8">
      <div class="dav-card">
        <div class="dav-card-body">

          <h3 class="mb-2">Datos del proyecto</h3>
          <p class="text-muted mb-3">Completá todos los campos requeridos.</p>

          <!-- ✅ Mensajes (si querés mostrarlos acá; si ya los mostrás en base.html, borrá este bloque para evitar duplicados) -->
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} mb-3">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}

          <form method="post" class="row g-3" novalidate>
            {% csrf_token %}

            <!-- Presentante -->
            <div class="col-12 mb-2">
              <p class="mb-1 large text-muted">
                <strong>Presentante:</strong> {{ persona_nombre }}
              </p>
            </div>

            <!-- Nombre del proyecto -->
            <div class="col-12">
              <label class="form-label">Nombre del proyecto</label>
              {{ form.nombre_proyecto }}
              {{ form.nombre_proyecto.errors }}
            </div>

            <!-- Tipo de proyecto -->
            <div class="col-md-6">
              <label class="form-label">Tipo de proyecto</label>
              {{ form.tipo_proyecto }}
              {{ form.tipo_proyecto.errors }}
            </div>

            <!-- Género -->
            <div class="col-md-6">
              <label class="form-label">Género</label>
              {{ form.genero }}
              {{ form.genero.errors }}
            </div>

            <!-- Declaración jurada -->
            <div class="col-12 mt-3">
              <div class="form-check">
                <!-- ✅ required en frontend (igual se valida en backend por el form) -->
                {{ form.declaracion_jurada }}
                <label class="form-check-label ms-2 small" for="{{ form.declaracion_jurada.id_for_label }}">
                  DECLARACIÓN JURADA: Confirmo que he leído las bases y condiciones
                  de <strong>{{ convocatoria.titulo }}</strong> y acepto los
                  requisitos de participación y aprobación.
                </label>
              </div>
              {{ form.declaracion_jurada.errors }}
            </div>

            <!-- BOTÓN -->
            <div class="col-12 text-end mt-4">
              <button type="submit" class="btn btn-primary">
                Siguiente
              </button>
            </div>

          </form>

        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
